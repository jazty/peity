// Peity jQuery plugin version 3.3.1
// (c) 2018 Ben Pickles
//
// http://benpickles.github.io/peity
//
// Released under MIT license.
!function(S,e,_,x){var n=S.fn.peity=function(e,a){return i&&this.each(function(){var t=S(this),i=t.data("_peity");i?(e&&(i.type=e),S.extend(i.opts,a)):(i=new r(t,e,S.extend({},n.defaults[e],t.data("peity"),a)),t.change(function(){i.draw()}).data("_peity",i)),i.draw()}),this},r=function(t,i,e){this.$el=t,this.type=i,this.opts=e},t=r.prototype,L=t.svgElement=function(t,i){return S(e.createElementNS("http://www.w3.org/2000/svg",t)).attr(i)},i="createElementNS"in e&&L("svg",{})[0].createSVGRect;t.draw=function(){var t=this.opts;n.graphers[this.type].call(this,t),t.after&&t.after.call(this,t)},t.fill=function(){var e=this.opts.fill;return S.isFunction(e)?e:function(t,i){return e[i%e.length]}},t.prepare=function(t,i){return this.$svg||this.$el.hide().after(this.$svg=L("svg",{class:"peity"})),this.$svg.empty().data("_peity",this).attr({height:i,width:t})},t.values=function(){return S.map(this.$el.text().split(this.opts.delimiter),function(t){return parseFloat(t)})},n.defaults={},n.graphers={},n.register=function(t,i,e){this.defaults[t]=i,this.graphers[t]=e},n.register("pie",{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(t){if(!t.delimiter){var i=this.$el.text().match(/[^0-9\.]/);t.delimiter=i?i[0]:","}var e=S.map(this.values(),function(t){return 0<t?t:0});if("/"==t.delimiter){var a=e[0],n=e[1];e=[a,_.max(0,n-a)]}if(t.values){a=t.values[0],n=t.values[1];e=[a,_.max(0,n-a)]}for(var r=0,s=e.length,h=0;r<s;r++)h+=e[r];h||(s=2,e=[0,h=1]);var l=2*t.radius,p=this.prepare(t.width||l,t.height||l),o=p.width(),u=p.height(),f=o/2,c=u/2,d=_.min(f,c),g=t.innerRadius;"donut"!=this.type||g||(g=.5*d);var v=_.PI,m=this.fill(),y=this.scale=function(t,i){var e=t/h*v*2-v/2;return[i*_.cos(e)+f,i*_.sin(e)+c]},w=0;for(r=0;r<s;r++){var x,k=e[r],$=k/h;if(0!=$){if(1==$)if(g){var j=f-.01,A=c-d,E=c-g;x=L("path",{d:["M",f,A,"A",d,d,0,1,1,j,A,"L",j,E,"A",g,g,0,1,0,f,E].join(" "),"data-value":k})}else x=L("circle",{cx:f,cy:c,"data-value":k,r:d});else{var F=w+k,M=["M"].concat(y(w,d),"A",d,d,0,.5<$?1:0,1,y(F,d),"L");g?M=M.concat(y(F,g),"A",g,g,0,.5<$?1:0,0,y(w,g)):M.push(f,c),w+=k,x=L("path",{d:M.join(" "),"data-value":k})}x.attr("fill",m.call(this,k,r,e)),p.append(x)}}}),n.register("donut",S.extend(!0,{},n.defaults.pie),function(t){n.graphers.pie.call(this,t)}),n.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(t){var i=this.values();1==i.length&&i.push(i[0]);for(var e=_.max.apply(_,t.max==x?i:i.concat(t.max)),a=_.min.apply(_,t.min==x?i:i.concat(t.min)),n=this.prepare(t.width,t.height),r=t.strokeWidth,s=n.width(),h=n.height()-r,l=e-a,p=this.x=function(t){return t*(s/(i.length-1))},o=this.y=function(t){var i=h;return l&&(i-=(t-a)/l*h),i+r/2},u=o(_.max(a,0)),f=[0,u],c=0;c<i.length;c++)f.push(p(c),o(i[c]));f.push(s,u),t.fill&&n.append(L("polygon",{fill:t.fill,points:f.join(" ")})),r&&n.append(L("polyline",{fill:"none",points:f.slice(2,f.length-2).join(" "),stroke:t.stroke,"stroke-width":r,"stroke-linecap":"square"}))}),n.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:.1,width:32},function(t){for(var i=this.values(),e=_.max.apply(_,t.max==x?i:i.concat(t.max)),a=_.min.apply(_,t.min==x?i:i.concat(t.min)),n=this.prepare(t.width,t.height),r=n.width(),s=n.height(),h=e-a,l=t.padding,p=this.fill(),o=this.x=function(t){return t*r/i.length},u=this.y=function(t){return s-(h?(t-a)/h*s:1)},f=0;f<i.length;f++){var c,d=o(f+l),g=o(f+1-l)-d,v=i[f],m=u(v),y=m,w=m;h?v<0?y=u(_.min(e,0)):w=u(_.max(a,0)):c=1,0==(c=w-y)&&(c=1,0<e&&h&&y--),n.append(L("rect",{"data-value":v,fill:p.call(this,v,f,i),x:d,y:y,width:g,height:c}))}})}(jQuery,document,Math);
